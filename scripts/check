#!/bin/sh -e

PACKAGE="httpcore"

if [ -d 'venv' ] ; then
    PREFIX="venv/bin/"
else
    PREFIX=""
fi

set -x

${PREFIX}mypy --ignore-missing-imports ${PACKAGE}
${PREFIX}flake8 --max-line-length 88 ${PACKAGE}
${PREFIX}black --check --exclude '(httpcore/_sync|tests/sync_tests)/.*' --target-version=py37 ${PACKAGE} tests
scripts/unasync --check
